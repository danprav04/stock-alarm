2025-05-26 11:41:24,729 - root - INFO - main:149 - ===================================================================
2025-05-26 11:41:24,731 - root - INFO - main:150 - Starting Financial Analysis Script at 2025-05-26 08:41:24 UTC
2025-05-26 11:41:24,731 - root - INFO - main:151 - ===================================================================
2025-05-26 11:41:24,734 - root - INFO - main:111 - Initializing database as per command line argument...
2025-05-26 11:41:24,734 - root - INFO - connection:19 - Initializing database and creating tables...
2025-05-26 11:41:29,072 - root - INFO - connection:23 - Database tables created successfully (if they didn't exist).
2025-05-26 11:41:29,074 - root - INFO - main:114 - Database initialization complete.
2025-05-26 11:41:29,075 - root - INFO - main:143 - --- Main script execution finished. ---
2025-05-26 11:41:29,075 - root - INFO - main:156 - Financial Analysis Script finished at 2025-05-26 08:41:29 UTC
2025-05-26 11:41:29,076 - root - INFO - main:157 - Total execution time: 0:00:04.345871
2025-05-26 11:41:29,077 - root - INFO - main:158 - ===================================================================
2025-05-26 11:41:33,083 - root - INFO - main:149 - ===================================================================
2025-05-26 11:41:33,084 - root - INFO - main:150 - Starting Financial Analysis Script at 2025-05-26 08:41:33 UTC
2025-05-26 11:41:33,084 - root - INFO - main:151 - ===================================================================
2025-05-26 11:41:33,086 - root - INFO - main:16 - --- Starting Individual Stock Analysis for: ['NKE'] ---
2025-05-26 11:41:35,843 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:41:36,845 - root - INFO - stock_analyzer:82 - Fetched profile from FMP for NKE.
2025-05-26 11:41:36,846 - root - INFO - stock_analyzer:121 - Stock NKE not found in DB, creating new entry.
2025-05-26 11:41:37,318 - root - INFO - stock_analyzer:161 - Stock entry for NKE (ID: 1, CIK: 0000320187) ready.
2025-05-26 11:41:37,319 - root - INFO - stock_analyzer:206 - Full analysis pipeline started for NKE...
2025-05-26 11:41:37,320 - root - INFO - data_fetcher:9 - Fetching financial statements for NKE...
2025-05-26 11:41:38,446 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/income-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzf...
2025-05-26 11:41:41,194 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/balance-sheet-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZ...
2025-05-26 11:41:43,898 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/cash-flow-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91T...
2025-05-26 11:41:45,400 - root - INFO - data_fetcher:26 - FMP Annuals for NKE: Income(5), Balance(5), Cashflow(5).
2025-05-26 11:41:46,312 - root - WARNING - base_client:139 - HTTP error on attempt 1/3 for GET https://financialmodelingprep.com/api/v3/income-statement/NKE (Params: {'apikey': '62ER******61uB', 'period': 'quarter', 'limit': 8}, Headers: {}): 403 - {
  "Error Message": "Exclusive Endpoint : This endpoint is not available under your current subscription agreement, please visit our subscription page to upgrade your plan or contact us at https://si...
2025-05-26 11:41:46,314 - root - ERROR - base_client:158 - Client error 403 (Unauthorized/Forbidden) for https://financialmodelingprep.com/api/v3/income-statement/NKE. API key may be invalid or permissions lacking. No retry. Params: {'apikey': '62ER******61uB', 'period': 'quarter', 'limit': 8}
2025-05-26 11:41:47,817 - root - INFO - data_fetcher:31 - FMP Quarterly Income for NKE: 0 records.
2025-05-26 11:41:49,400 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/financials-reported?count=8&freq=quarterly&symbol=NKE&token=d0o7...
2025-05-26 11:41:50,903 - root - INFO - data_fetcher:38 - Fetched 45 quarterly reports from Finnhub for NKE.
2025-05-26 11:41:52,293 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=INCOME_STATEMENT&symbol=NKE...
2025-05-26 11:42:07,296 - root - INFO - data_fetcher:47 - Fetched 81 quarterly income reports from Alpha Vantage for NKE.
2025-05-26 11:42:08,741 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=BALANCE_SHEET&symbol=NKE...
2025-05-26 11:42:23,743 - root - INFO - data_fetcher:55 - Fetched 81 quarterly balance reports from Alpha Vantage for NKE.
2025-05-26 11:42:25,155 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=CASH_FLOW&symbol=NKE...
2025-05-26 11:42:40,157 - root - INFO - data_fetcher:63 - Fetched 81 quarterly cash flow reports from Alpha Vantage for NKE.
2025-05-26 11:42:40,159 - root - INFO - data_fetcher:76 - Fetching key metrics and profile for NKE.
2025-05-26 11:42:41,433 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:42:43,793 - root - WARNING - base_client:139 - HTTP error on attempt 1/3 for GET https://financialmodelingprep.com/api/v3/key-metrics/NKE (Params: {'apikey': '62ER******61uB', 'period': 'quarterly', 'limit': 8}, Headers: {}): 403 - {
  "Error Message": "Exclusive Endpoint : This endpoint is not available under your current subscription agreement, please visit our subscription page to upgrade your plan or contact us at https://si...
2025-05-26 11:42:43,795 - root - ERROR - base_client:158 - Client error 403 (Unauthorized/Forbidden) for https://financialmodelingprep.com/api/v3/key-metrics/NKE. API key may be invalid or permissions lacking. No retry. Params: {'apikey': '62ER******61uB', 'period': 'quarterly', 'limit': 8}
2025-05-26 11:42:46,561 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=NKE&token=d0o7hphr01qqr9alj38gd0o7hphr0...
2025-05-26 11:42:48,063 - root - INFO - data_fetcher:95 - FMP KM Annual for NKE: 5. FMP KM Quarterly for NKE: 0. Finnhub Basic Financials for NKE: OK.
2025-05-26 11:42:48,064 - root - INFO - metrics_calculator:437 - Calculating derived metrics for NKE...
2025-05-26 11:42:48,065 - root - WARNING - metrics_calculator:454 - AlphaVantage overview data not found in cache for NKE. Fetching now.
2025-05-26 11:42:49,013 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=OVERVIEW&symbol=NKE...
2025-05-26 11:42:49,015 - root - WARNING - metrics_calculator:267 - DATA QUALITY WARNING: Latest quarterly revenue (35,212,000,000 from Finnhub) deviates by 39.99% from avg of recent historical quarters (25,153,750,000). Review data accuracy.
2025-05-26 11:42:49,016 - root - INFO - metrics_calculator:279 - Using latest quarterly revenue: 35,212,000,000 (Source: Finnhub) for NKE.
2025-05-26 11:42:49,018 - root - INFO - metrics_calculator:492 - Calculated metrics for NKE: {
  "pe_ratio": 25.306645614035087,
  "pb_ratio": 9.996388080388082,
  "ps_ratio": 1.8526,
  "ev_to_sales": 1.884,
  "ev_to_ebitda": 15.69,
  "dividend_yield": 0.015036616136056905,
  "eps": 3.76,
  "net_profit_margin": 0.0943,
  "gross_profit_margin": 0.43824503066815973,
  "operating_profit_margin": 0.1302519372,
  "interest_coverage_ratio": null,
  "roe": 0.39501039501039503,
  "roa": 0.14956704277092628,
  "roic": 0.3444796354747266,
  "debt_to_equity": 0.8282744282744283,
  "current_ratio": 2.3961106391012934,
  "quick_ratio": 1.5112810346455205,
  "debt_to_ebitda": 1.6704402515723271,
  "revenue_growth_yoy": 0.0028310912392369722,
  "eps_growth_yoy": 0.14984709480122316,
  "revenue_growth_cagr_3yr": 0.04861491256483208,
  "eps_growth_cagr_3yr": -0.009180522194930263,
  "revenue_growth_cagr_5yr": 0.08251487385466705,
  "eps_growth_cagr_5yr": 0.23239537592729897,
  "revenue_growth_qoq": 0.47065948293864596,
  "free_cash_flow_per_share": 5.6166709107885575,
  "free_cash_flow_yield": 0.07456847629026464,
  "free_cash_flow_trend": "Growing",
  "retained_earnings_trend": "Declining"
}
2025-05-26 11:42:49,024 - root - INFO - metrics_calculator:495 - Key metrics snapshot for NKE: {
  "q_revenue_source": "Finnhub",
  "latest_q_revenue": 35212000000.0,
  "avg_historical_q_revenue_for_check": 25153750000.0
}
2025-05-26 11:42:49,025 - root - INFO - dcf_analyzer:55 - Performing simplified DCF analysis for NKE...
2025-05-26 11:42:49,025 - root - INFO - dcf_analyzer:181 - DCF for NKE: Base IV/Share: 72.57, Upside: 20.92%
2025-05-26 11:42:49,025 - root - INFO - qualitative_analyzer:104 - Fetching and attempting to summarize latest 10-K for NKE into JSON...
2025-05-26 11:42:50,097 - root - INFO - base_client:65 - Cached response for: GET:https://data.sec.gov/submissions/CIK0000320187.json?...
2025-05-26 11:42:50,608 - root - INFO - sec_edgar_client:127 - Fetching filing text from: https://www.sec.gov/Archives/edgar/data/320187/000032018724000044/nke-20240531.htm
2025-05-26 11:42:51,914 - root - INFO - base_client:65 - Cached response for: GET:https://www.sec.gov/Archives/edgar/data/320187/000032018724000044/nke-20240531.htm?...
2025-05-26 11:42:51,916 - root - INFO - qualitative_analyzer:144 - Fetched 10-K text (length: 2651098) for NKE. Extracting and summarizing sections.
2025-05-26 11:42:53,232 - root - INFO - qualitative_analyzer:24 - Summarizing 'Business (Item 1)' for NIKE, Inc. (NKE) (JSON output), original length: 10577 chars.
2025-05-26 11:42:53,232 - root - INFO - qualitative_analyzer:33 - Section length 10577 is within single-pass limit (150000). Summarizing directly for JSON.
2025-05-26 11:43:07,437 - root - INFO - qualitative_analyzer:179 - JSON Summary for 'Business (Item 1)' (source length 10577): {'summary': "NIKE, Inc. is a global leader in the design, development, worldwide marketing, and selling of athletic footwear, apparel, equipment, acce...
2025-05-26 11:43:07,438 - root - INFO - qualitative_analyzer:24 - Summarizing 'Risk Factors (Item 1A)' for NIKE, Inc. (NKE) (JSON output), original length: 310235 chars.
2025-05-26 11:43:07,439 - root - INFO - qualitative_analyzer:47 - Section length 310235 exceeds single-pass limit. Applying chunked summarization for JSON output.
2025-05-26 11:43:07,442 - root - INFO - qualitative_analyzer:57 - Summarizing chunk 1/3 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 150000 chars) as text part.
2025-05-26 11:43:37,700 - root - INFO - qualitative_analyzer:57 - Summarizing chunk 2/3 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 150000 chars) as text part.
2025-05-26 11:44:18,088 - root - INFO - qualitative_analyzer:57 - Summarizing chunk 3/3 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 20235 chars) as text part.
2025-05-26 11:44:29,172 - root - INFO - qualitative_analyzer:74 - Concatenated chunk text summaries length for 'Risk Factors (Item 1A)': 6542 chars.
2025-05-26 11:44:29,172 - root - INFO - qualitative_analyzer:82 - Generating final JSON summary for 'Risk Factors (Item 1A)' from concatenated chunk summaries.
2025-05-26 11:44:42,166 - root - INFO - qualitative_analyzer:179 - JSON Summary for 'Risk Factors (Item 1A)' (source length 310235): {'summary': "NIKE, Inc. faces a complex array of operational and strategic risks inherent to its nature as a global consumer products company. These i...
2025-05-26 11:44:42,166 - root - INFO - qualitative_analyzer:24 - Summarizing 'Management's Discussion and Analysis (Item 7)' for NIKE, Inc. (NKE) (JSON output), original length: 11209 chars.
2025-05-26 11:44:42,167 - root - INFO - qualitative_analyzer:33 - Section length 11209 is within single-pass limit (150000). Summarizing directly for JSON.
2025-05-26 11:44:59,261 - root - INFO - qualitative_analyzer:179 - JSON Summary for 'Management's Discussion and Analysis (Item 7)' (source length 11209): {'summary': "NIKE, Inc. is the world's largest seller of athletic footwear and apparel, operating globally through its NIKE Direct channels (retail st...
2025-05-26 11:45:30,652 - root - INFO - qualitative_analyzer:237 - 10-K qualitative JSON summaries and AI interpretations generated for NKE.
2025-05-26 11:45:30,654 - root - INFO - qualitative_analyzer:245 - Fetching and analyzing competitor data for NKE (JSON output)...
2025-05-26 11:45:31,652 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/peers?symbol=NKE&token=d0o7hphr01qqr9alj38gd0o7hphr01qqr9alj390...
2025-05-26 11:45:32,654 - root - INFO - qualitative_analyzer:276 - Identified peers for NKE: ['DECK', 'SKX', 'CROX', 'SHOO', 'WWW']. Fetching basic data for comparison.
2025-05-26 11:45:33,902 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/DECK?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:45:36,139 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/DECK?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 11:45:38,618 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=DECK&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 11:45:40,831 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/SKX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:45:43,118 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/SKX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:45:45,330 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=SKX&token=d0o7hphr01qqr9alj38gd0o7hphr0...
2025-05-26 11:45:47,522 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/CROX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:45:49,722 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/CROX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 11:45:51,862 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=CROX&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 11:45:54,071 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/SHOO?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:45:56,269 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/SHOO?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 11:45:58,471 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=SHOO&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 11:46:00,670 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/WWW?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:46:02,900 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/WWW?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 11:46:05,339 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=WWW&token=d0o7hphr01qqr9alj38gd0o7hphr0...
2025-05-26 11:46:21,753 - root - INFO - qualitative_analyzer:378 - Competitor analysis JSON summary generated for NKE.
2025-05-26 11:46:21,755 - root - INFO - ai_synthesis:69 - Synthesizing investment thesis for NKE using JSON format...
2025-05-26 11:46:37,182 - root - WARNING - ai_synthesis:217 - Adjusting AI confidence for NKE from 'Medium' to 'Low' due to: Significant data warnings or multiple issues, and AI was already Medium.
2025-05-26 11:46:37,183 - root - INFO - ai_synthesis:228 - Generated thesis for NKE. Decision: Buy, Strategy: GARP, Confidence: Low
2025-05-26 11:46:37,732 - root - INFO - stock_analyzer:302 - Successfully analyzed and saved stock data: NKE (Analysis ID: 1)
2025-05-26 11:46:37,804 - root - INFO - main:143 - --- Main script execution finished. ---
2025-05-26 11:46:37,804 - root - INFO - main:156 - Financial Analysis Script finished at 2025-05-26 08:46:37 UTC
2025-05-26 11:46:37,805 - root - INFO - main:157 - Total execution time: 0:05:04.721281
2025-05-26 11:46:37,805 - root - INFO - main:158 - ===================================================================
2025-05-26 12:27:10,311 - root - INFO - main:149 - ===================================================================
2025-05-26 12:27:10,312 - root - INFO - main:150 - Starting Financial Analysis Script at 2025-05-26 09:27:10 UTC
2025-05-26 12:27:10,312 - root - INFO - main:151 - ===================================================================
2025-05-26 12:27:10,315 - root - INFO - main:57 - --- Generating Today's Email Summary ---
2025-05-26 12:27:11,721 - root - INFO - main:69 - Found 1 stock analyses, 0 IPO analyses, 0 news analyses since 2025-05-26 00:00:00 UTC for email.
2025-05-26 12:27:13,903 - root - INFO - email_service:250 - Email sent successfully to daniprav@gmail.com
2025-05-26 12:27:13,965 - root - INFO - main:143 - --- Main script execution finished. ---
2025-05-26 12:27:13,965 - root - INFO - main:156 - Financial Analysis Script finished at 2025-05-26 09:27:13 UTC
2025-05-26 12:27:13,966 - root - INFO - main:157 - Total execution time: 0:00:03.653183
2025-05-26 12:27:13,966 - root - INFO - main:158 - ===================================================================
