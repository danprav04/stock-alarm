2025-05-26 10:43:56,558 - root - INFO - main:113 - ===================================================================
2025-05-26 10:43:56,559 - root - INFO - main:114 - Starting Financial Analysis Script at 2025-05-26 07:43:56 UTC
2025-05-26 10:43:56,559 - root - INFO - main:115 - ===================================================================
2025-05-26 10:43:56,561 - root - INFO - main:89 - Initializing database as per command line argument...
2025-05-26 10:43:56,562 - root - INFO - connection:19 - Initializing database and creating tables...
2025-05-26 10:44:00,488 - root - INFO - connection:23 - Database tables created successfully (if they didn't exist).
2025-05-26 10:44:00,491 - root - INFO - main:90 - Database initialization complete.
2025-05-26 10:44:00,493 - root - INFO - main:108 - --- Main script execution finished. ---
2025-05-26 10:44:00,494 - root - INFO - main:118 - Financial Analysis Script finished at 2025-05-26 07:44:00 UTC
2025-05-26 10:44:00,495 - root - INFO - main:119 - Total execution time: 0:00:03.935530
2025-05-26 10:44:00,496 - root - INFO - main:120 - ===================================================================
2025-05-26 10:44:05,237 - root - INFO - main:113 - ===================================================================
2025-05-26 10:44:05,238 - root - INFO - main:114 - Starting Financial Analysis Script at 2025-05-26 07:44:05 UTC
2025-05-26 10:44:05,238 - root - INFO - main:115 - ===================================================================
2025-05-26 10:44:05,240 - root - INFO - main:16 - --- Starting Individual Stock Analysis for: ['NKE'] ---
2025-05-26 10:44:07,603 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:44:09,104 - root - INFO - stock_analyzer:83 - Fetched profile from FMP for NKE.
2025-05-26 10:44:09,105 - root - INFO - stock_analyzer:124 - Stock NKE not found in DB, creating new entry.
2025-05-26 10:44:09,578 - root - INFO - stock_analyzer:168 - Stock entry for NKE (ID: 1, CIK: 0000320187) ready.
2025-05-26 10:44:09,578 - root - INFO - stock_analyzer:220 - Full analysis pipeline started for NKE...
2025-05-26 10:44:09,579 - root - INFO - data_fetcher:9 - Fetching financial statements for NKE...
2025-05-26 10:44:10,661 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/income-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzf...
2025-05-26 10:44:13,380 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/balance-sheet-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZ...
2025-05-26 10:44:16,086 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/cash-flow-statement/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91T...
2025-05-26 10:44:17,588 - root - INFO - data_fetcher:26 - FMP Annuals for NKE: Income(5), Balance(5), Cashflow(5).
2025-05-26 10:44:18,462 - root - WARNING - base_client:139 - HTTP error on attempt 1/3 for GET https://financialmodelingprep.com/api/v3/income-statement/NKE (Params: {'apikey': '62ER******61uB', 'period': 'quarter', 'limit': 8}, Headers: {}): 403 - {
  "Error Message": "Exclusive Endpoint : This endpoint is not available under your current subscription agreement, please visit our subscription page to upgrade your plan or contact us at https://si...
2025-05-26 10:44:18,464 - root - ERROR - base_client:158 - Client error 403 (Unauthorized/Forbidden) for https://financialmodelingprep.com/api/v3/income-statement/NKE. API key may be invalid or permissions lacking. No retry. Params: {'apikey': '62ER******61uB', 'period': 'quarter', 'limit': 8}
2025-05-26 10:44:19,968 - root - INFO - data_fetcher:31 - FMP Quarterly Income for NKE: 0 records.
2025-05-26 10:44:21,708 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/financials-reported?count=8&freq=quarterly&symbol=NKE&token=d0o7...
2025-05-26 10:44:23,211 - root - INFO - data_fetcher:38 - Fetched 45 quarterly reports from Finnhub for NKE.
2025-05-26 10:44:24,664 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=INCOME_STATEMENT&symbol=NKE...
2025-05-26 10:44:39,666 - root - INFO - data_fetcher:47 - Fetched 81 quarterly income reports from Alpha Vantage for NKE.
2025-05-26 10:44:41,188 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=BALANCE_SHEET&symbol=NKE...
2025-05-26 10:44:56,190 - root - INFO - data_fetcher:55 - Fetched 81 quarterly balance reports from Alpha Vantage for NKE.
2025-05-26 10:44:57,604 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=CASH_FLOW&symbol=NKE...
2025-05-26 10:45:12,606 - root - INFO - data_fetcher:63 - Fetched 81 quarterly cash flow reports from Alpha Vantage for NKE.
2025-05-26 10:45:12,606 - root - INFO - data_fetcher:76 - Fetching key metrics and profile for NKE.
2025-05-26 10:45:13,949 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/NKE?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:45:16,324 - root - WARNING - base_client:139 - HTTP error on attempt 1/3 for GET https://financialmodelingprep.com/api/v3/key-metrics/NKE (Params: {'apikey': '62ER******61uB', 'period': 'quarterly', 'limit': 8}, Headers: {}): 403 - {
  "Error Message": "Exclusive Endpoint : This endpoint is not available under your current subscription agreement, please visit our subscription page to upgrade your plan or contact us at https://si...
2025-05-26 10:45:16,325 - root - ERROR - base_client:158 - Client error 403 (Unauthorized/Forbidden) for https://financialmodelingprep.com/api/v3/key-metrics/NKE. API key may be invalid or permissions lacking. No retry. Params: {'apikey': '62ER******61uB', 'period': 'quarterly', 'limit': 8}
2025-05-26 10:45:18,952 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=NKE&token=d0o7hphr01qqr9alj38gd0o7hphr0...
2025-05-26 10:45:20,454 - root - INFO - data_fetcher:95 - FMP KM Annual for NKE: 5. FMP KM Quarterly for NKE: 0. Finnhub Basic Financials for NKE: OK.
2025-05-26 10:45:20,454 - root - INFO - metrics_calculator:437 - Calculating derived metrics for NKE...
2025-05-26 10:45:20,455 - root - WARNING - metrics_calculator:454 - AlphaVantage overview data not found in cache for NKE. Fetching now.
2025-05-26 10:45:21,577 - root - INFO - base_client:65 - Cached response for: GET:https://www.alphavantage.co/query?apikey=HB6N4X55UTFGN2FP&function=OVERVIEW&symbol=NKE...
2025-05-26 10:45:21,578 - root - INFO - metrics_calculator:279 - Using latest quarterly revenue: 35,212,000,000 (Source: Finnhub) for NKE.
2025-05-26 10:45:21,579 - root - INFO - metrics_calculator:492 - Calculated metrics for NKE: {
  "pe_ratio": 25.306645614035087,
  "pb_ratio": 9.996388080388082,
  "ps_ratio": 1.8526,
  "ev_to_sales": 1.884,
  "ev_to_ebitda": 15.69,
  "dividend_yield": 0.015036616136056905,
  "eps": 3.76,
  "net_profit_margin": 0.0943,
  "gross_profit_margin": 0.43824503066815973,
  "operating_profit_margin": 0.1302519372,
  "interest_coverage_ratio": null,
  "roe": 0.39501039501039503,
  "roa": 0.14956704277092628,
  "roic": 0.3444796354747266,
  "debt_to_equity": 0.8282744282744283,
  "current_ratio": 2.3961106391012934,
  "quick_ratio": 1.5112810346455205,
  "debt_to_ebitda": 1.6704402515723271,
  "revenue_growth_yoy": 0.0028310912392369722,
  "eps_growth_yoy": 0.14984709480122316,
  "revenue_growth_cagr_3yr": 0.04861491256483208,
  "eps_growth_cagr_3yr": -0.009180522194930263,
  "revenue_growth_cagr_5yr": 0.08251487385466705,
  "eps_growth_cagr_5yr": 0.23239537592729897,
  "revenue_growth_qoq": 0.47065948293864596,
  "free_cash_flow_per_share": 5.6166709107885575,
  "free_cash_flow_yield": 0.07456847629026464,
  "free_cash_flow_trend": "Growing",
  "retained_earnings_trend": "Declining"
}
2025-05-26 10:45:21,586 - root - INFO - metrics_calculator:495 - Key metrics snapshot for NKE: {
  "q_revenue_source": "Finnhub",
  "latest_q_revenue": 35212000000.0,
  "avg_historical_q_revenue_for_check": 25153750000.0
}
2025-05-26 10:45:21,587 - root - INFO - dcf_analyzer:55 - Performing simplified DCF analysis for NKE...
2025-05-26 10:45:21,588 - root - INFO - dcf_analyzer:181 - DCF for NKE: Base IV/Share: 72.57, Upside: 20.92%
2025-05-26 10:45:21,588 - root - INFO - qualitative_analyzer:88 - Fetching and attempting to summarize latest 10-K for NKE
2025-05-26 10:45:22,878 - root - INFO - base_client:65 - Cached response for: GET:https://data.sec.gov/submissions/CIK0000320187.json?...
2025-05-26 10:45:23,382 - root - INFO - sec_edgar_client:127 - Fetching filing text from: https://www.sec.gov/Archives/edgar/data/320187/000032018724000044/nke-20240531.htm
2025-05-26 10:45:24,697 - root - INFO - base_client:65 - Cached response for: GET:https://www.sec.gov/Archives/edgar/data/320187/000032018724000044/nke-20240531.htm?...
2025-05-26 10:45:24,699 - root - INFO - qualitative_analyzer:114 - Fetched 10-K text (length: 2651098) for NKE. Extracting and summarizing sections.
2025-05-26 10:45:26,033 - root - INFO - qualitative_analyzer:20 - Summarizing 'Business (Item 1)' for NIKE, Inc. (NKE), original length: 10577 chars.
2025-05-26 10:45:26,033 - root - INFO - qualitative_analyzer:23 - Section length 10577 is within single-pass limit (100000). Summarizing directly.
2025-05-26 10:45:38,111 - root - INFO - qualitative_analyzer:141 - Summary for 'Business (Item 1)' (source length 10577): NIKE, Inc.'s core business operation is the design, development, and worldwide marketing and selling of athletic footwear, apparel, equipment, accesso...
2025-05-26 10:45:38,112 - root - INFO - qualitative_analyzer:20 - Summarizing 'Risk Factors (Item 1A)' for NIKE, Inc. (NKE), original length: 310235 chars.
2025-05-26 10:45:38,113 - root - INFO - qualitative_analyzer:35 - Section length 310235 exceeds single-pass limit. Applying chunked summarization (Chunk size: 80000, Overlap: 5000).
2025-05-26 10:45:38,115 - root - INFO - qualitative_analyzer:49 - Summarizing chunk 1/5 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 80000 chars).
2025-05-26 10:45:56,624 - root - INFO - qualitative_analyzer:49 - Summarizing chunk 2/5 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 80000 chars).
2025-05-26 10:46:09,976 - root - INFO - qualitative_analyzer:49 - Summarizing chunk 3/5 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 80000 chars).
2025-05-26 10:46:43,487 - root - INFO - qualitative_analyzer:49 - Summarizing chunk 4/5 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 80000 chars).
2025-05-26 10:47:08,181 - root - INFO - qualitative_analyzer:49 - Summarizing chunk 5/5 for 'Risk Factors (Item 1A)' of NIKE, Inc. (NKE) (length: 10235 chars).
2025-05-26 10:47:20,421 - root - INFO - qualitative_analyzer:64 - Concatenated chunk summaries length for 'Risk Factors (Item 1A)': 10147 chars.
2025-05-26 10:47:20,423 - root - INFO - qualitative_analyzer:141 - Summary for 'Risk Factors (Item 1A)' (source length 310235): NIKE, Inc. faces several significant operational and strategic risk factors:  1.  **Changing Consumer Preferences and Design Trends:** Demand for prod...
2025-05-26 10:47:20,424 - root - INFO - qualitative_analyzer:20 - Summarizing 'Management's Discussion and Analysis (Item 7)' for NIKE, Inc. (NKE), original length: 11209 chars.
2025-05-26 10:47:20,425 - root - INFO - qualitative_analyzer:23 - Section length 11209 is within single-pass limit (100000). Summarizing directly.
2025-05-26 10:47:33,934 - root - INFO - qualitative_analyzer:141 - Summary for 'Management's Discussion and Analysis (Item 7)' (source length 11209): NIKE, Inc. reported a slight increase in fiscal 2024 revenues to $51.4 billion, up from $51.2 billion in fiscal 2023. This growth was supported by a 1...
2025-05-26 10:48:17,633 - root - INFO - qualitative_analyzer:199 - 10-K qualitative summaries and AI interpretations generated for NKE.
2025-05-26 10:48:17,636 - root - INFO - qualitative_analyzer:206 - Fetching and analyzing competitor data for NKE...
2025-05-26 10:48:18,622 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/peers?symbol=NKE&token=d0o7hphr01qqr9alj38gd0o7hphr01qqr9alj390...
2025-05-26 10:48:20,125 - root - INFO - qualitative_analyzer:231 - Identified peers for NKE: ['DECK', 'SKX', 'CROX', 'SHOO', 'WWW']. Fetching basic data for comparison.
2025-05-26 10:48:21,389 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/DECK?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:24,099 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/DECK?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 10:48:27,016 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=DECK&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 10:48:29,728 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/SKX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:32,428 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/SKX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:35,131 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=SKX&token=d0o7hphr01qqr9alj38gd0o7hphr0...
2025-05-26 10:48:37,838 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/CROX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:40,575 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/CROX?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 10:48:43,252 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=CROX&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 10:48:45,966 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/SHOO?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:48,658 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/SHOO?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61u...
2025-05-26 10:48:51,349 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=SHOO&token=d0o7hphr01qqr9alj38gd0o7hphr...
2025-05-26 10:48:54,091 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/profile/WWW?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:56,837 - root - INFO - base_client:65 - Cached response for: GET:https://financialmodelingprep.com/api/v3/key-metrics/WWW?apikey=62ERGmJoqQgGD0nSGxRZS91TVzfz61uB...
2025-05-26 10:48:59,759 - root - INFO - base_client:65 - Cached response for: GET:https://finnhub.io/api/v1/stock/metric?metric=all&symbol=WWW&token=d0o7hphr01qqr9alj38gd0o7hphr0...
